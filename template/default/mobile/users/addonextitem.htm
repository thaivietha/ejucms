
{volist name="$addonFieldExtList" id="vo"}
{if (!isset($vo.ifeditable) || $vo.ifeditable) && ($vo.ifsystem == 0)}
{switch name="vo.dtype"}
{case value="hidden"}
<!-- 隐藏域 start -->
<div class="item" style="display: none;">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <input type="hidden" id="{$vo.fieldArr}_{$vo.name|default=''}" name="{$vo.fieldArr}[{$vo.name|default=''}]" value="{$vo.dfvalue|default=''}">
    </div>
</div>
<!-- 隐藏域 start -->
{/case}
{case value="region"}
<!-- 区域选项 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <select  name="{$vo.fieldArr}[{$vo.name|default=''}]">
            {volist name="$vo.dfvalue" id="v2"}
            <option value="{$v2['id']}" {if condition="isset($vo['trueValue']) AND in_array($v2['id'], $vo['trueValue'])"} selected {/if}>{$v2['name']}</option>
            {/volist}
        </select>
    </div>
</div>
<!-- 区域选项 end -->
{/case}
{case value="text"}
<!-- 单行文本框 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <input type="text" id="{$vo.fieldArr}_{$vo.name|default=''}" name="{$vo.fieldArr}[{$vo.name|default=''}]" value="{$vo.dfvalue|default=''}" placeholder="{$vo.remark|default=''}" />
    </div>
    <div class="item_unit">{$vo.dfvalue_unit|default=''}</div>
</div>
<!-- 单行文本框 end -->
{/case}

{case value="multitext"}
<!-- 多行文本框 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <textarea id="{$vo.fieldArr}_{$vo.name|default=''}" name="{$vo.fieldArr}[{$vo.name|default=''}]" placeholder="{$vo.remark|default=''}" >{$vo.dfvalue|default=''}</textarea>
    </div>
</div>
<!-- 多行文本框 end -->
{/case}
{case value="checkbox"}
<!-- 复选框 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r ">
        {volist name="$vo.dfvalue" id="v2"}
        <span class="mr10">
            <input type="checkbox" onclick="checkbox_is_empty('{$vo.fieldArr}','{$vo.name}');"  name="{$vo.fieldArr}[{$vo.name|default=''}][]" value="{$v2}" {if condition="isset($vo['trueValue']) AND in_array($v2, $vo['trueValue'])"}checked="checked"{/if}/>{$v2}
        </span>
        {/volist}
        <input type="hidden" name="{$vo.fieldArr}[{$vo.name}_eyempty]" value="{if condition="!empty($vo['trueValue'])"}1{else /}0{/if}">
    </div>
</div>
<!-- 复选框 end -->
{/case}
{case value="radio"}
<!-- 单选项 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <select  name="{$vo.fieldArr}[{$vo.name|default=''}]">
            {volist name="$vo.dfvalue" id="v2"}
            <option value="{$v2}" {if condition="isset($vo['trueValue']) AND in_array($v2, $vo['trueValue'])"}selected{/if} >{$v2}</option>
            {/volist}
        </select>
    </div>
</div>

<!-- 单选项 end -->
{/case}

{case value="switch"}
<!-- 开关 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r onoff">
        <label for="{$vo.fieldArr}_{$vo.name|default=''}1" class="cb-enable {if condition="0 != $vo['dfvalue']"}selected{/if}">是</label>
        <label for="{$vo.fieldArr}_{$vo.name|default=''}0" class="cb-disable {if condition="0 == $vo['dfvalue']"}selected{/if}">否</label>
        <input id="{$vo.fieldArr}_{$vo.name|default=''}1" name="{$vo.fieldArr}[{$vo.name|default=''}]" value="1" type="radio" {if condition="0 != $vo['dfvalue']"}checked="checked"{/if}>
        <input id="{$vo.fieldArr}_{$vo.name|default=''}0" name="{$vo.fieldArr}[{$vo.name|default=''}]" value="0" type="radio" {if condition="0 == $vo['dfvalue']"}checked="checked"{/if}>
    </div>
</div>
<!-- 开关 end -->
{/case}
{case value="select"}
<!-- 下拉框 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <select   name="{$vo.fieldArr}[{$vo.name|default=''}]">
            {volist name="$vo.dfvalue" id="v2"}
            <option value="{$v2}" {if condition="isset($vo['trueValue']) AND in_array($v2, $vo['trueValue'])"}selected{/if}>{$v2}</option>
            {/volist}
        </select>
    </div>
</div>
<!-- 下拉框 end -->
{/case}
{case value="img"}
<!-- 单张图 start -->
<div class="item" style="border: 0;">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <div class="upload">
            <img style="width: 36px;height: 36px;margin-right: 20px;" id="img_{$vo.fieldArr}_{$vo.name|default=''}_eyou_local" src="{$vo[$vo['name'].'_eyou_local']|get_default_pic=###}">
            <span style="position: unset;" class="upload_bt test-upload-demoMore"  lay-data="{number:1,ey_inputId:'{$vo.fieldArr}_{$vo.name|default=''}_eyou_local',ey_savepath:'allimg'}">上传图片</span>
            <input type="hidden" name="{$vo.fieldArr}[{$vo.name|default=''}_eyou_local]"  value="{$vo[$vo['name'].'_eyou_local']|default=''}">
        </div>
    </div>
</div>
<!-- 单张图 end -->
{/case}

{case value="imgs"}
<!-- 多张图 start -->
<div class="item" style="border: 0;">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <div class="upload">
            <span class="upload_bt multi-upload-demoMore"  lay-data="{number:100,ey_savepath:'allimg',ey_callback:'{$vo.fieldArr}_{$vo.name|default=''}_call_back'}">上传图片</span>
        </div>
    </div>
</div>
<div class="upload-img {$vo.fieldArr}_{$vo.name|default=''}_div">
    {volist name="$vo[$vo['name'].'_eyou_imgupload_list']" id="v2" key="k2"}
    <div class="item-img images-upload">
        <img src="{$v2}" >
        <input type="hidden" name="{$vo.fieldArr}[{$vo.name|default=''}][]" value="{$v2}">
        <a href="javascript:void(0);" onclick="{$vo.fieldArr}_{$vo.name|default=''}_ClearPicArr(this,'{$v2}');">删除</a>
    </div>
    {/volist}
    <div class="images-upload" style="display: none;"></div>
    <div class="{$vo.fieldArr}_{$vo.name|default=''}_upload_tpl" style="display: none;">
        <div class="item-img images-upload">
            <img src="__STATIC__/admin/images/add-button.jpg" >
            <input type="hidden"/>
            <a href="javascript:void(0);">删除</a>
        </div>
    </div>
</div>
<!-- 上传图片显示的样板 end -->
<script type="text/javascript">
    // 上传多图回调函数
    function {$vo.fieldArr}_{$vo.name|default=''}_call_back(pathObj){
        if (Array.isArray(pathObj)){
            var paths = pathObj;
        }else{
            var paths = [pathObj.url];
        }
        var tpl_name = "{$vo.fieldArr}_{$vo.name|default=''}_upload_tpl";
        var  last_div = $("."+tpl_name).html();
        var div_name = "{$vo.fieldArr}_{$vo.name|default=''}_div";
        var input_name = "{$vo.fieldArr}[{$vo.name|default=''}][]";
        console.log(paths.length);
        for (var i=0;i<paths.length ;i++ )
        {
            $("."+div_name).find(".images-upload:eq(0)").before(last_div);  // 插入一个 新图片
            $("."+div_name).find(".images-upload:eq(0)").find('img').attr('src',paths[i]);// 修改他的图片路径
            $("."+div_name).find(".images-upload:eq(0)").find('input').attr('name',input_name).attr('value',paths[i]);// 设置隐藏域 要提交的值
            $("."+div_name).find(".images-upload:eq(0)").find('a:eq(0)').attr('onclick',"{$vo.fieldArr}_{$vo.name|default=''}_ClearPicArr(this,'"+paths[i]+"')").text('删除');
        }
    }
    /*
     * 上传之后删除组图input
     * @access   public
     * @val      string  删除的图片input
     */
    function {$vo.fieldArr}_{$vo.name|default=''}_ClearPicArr(obj,path)
    {
        $(obj).parent().remove(); // 删除完服务器的, 再删除 html上的图片
    }

</script>
<!-- 多张图 end -->
{/case}
{case value="int"}
<!-- 整数类型 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <input type="text" value="{$vo.dfvalue|default='0'}" name="{$vo.fieldArr}[{$vo.name|default=''}]" id="{$vo.fieldArr}_{$vo.name|default=''}" placeholder="只允许纯数字" onkeyup="this.value=this.value.replace(/[^0-9]/g,'');" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^0-9]/g,''));" />
    </div>
    <div class="item_unit">{$vo.dfvalue_unit|default=''}</div>
</div>
<!-- 整数类型 end -->
{/case}
{case value="float"}
<!-- 小数类型 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <input type="text" value="{$vo.dfvalue|default='0'}" name="{$vo.fieldArr}[{$vo.name|default=''}]" id="{$vo.fieldArr}_{$vo.name|default=''}" placeholder="允许带有小数点的数值" onkeyup="this.value=this.value.replace(/[^0-9\.]/g,'');" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^0-9\.]/g,''));" />
    </div>
    <div class="item_unit">{$vo.dfvalue_unit|default=''}</div>
</div>
<!-- 小数类型 end -->
{/case}
{case value="decimal"}
<!-- 金额类型 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <input type="text" value="{$vo.dfvalue|default='0'}" name="{$vo.fieldArr}[{$vo.name|default=''}]" id="{$vo.fieldArr}_{$vo.name|default=''}" placeholder="允许带有小数点的数值" onkeyup="this.value=this.value.replace(/[^0-9\.]/g,'');" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^0-9\.]/g,''));" />
    </div>
    <div class="item_unit">{$vo.dfvalue_unit|default=''}</div>
</div>
<!-- 金额类型 end -->
{/case}
{case value="datetime"}
<!-- 日期和时间 start -->
<div class="item">
    <div class="item_l">{if condition="isset($vo['ifrequire']) AND !empty($vo['ifrequire'])"}<b>*</b>{/if}{$vo.title|default=''}：</div>
    <div class="item_r">
        <input type="text" name="{$vo.fieldArr}[{$vo.name|default=''}]" id="{$vo.fieldArr}_{$vo.name|default=''}" value="{$vo['dfvalue']}"/>
    </div>
    <div class="item_unit">{$vo.dfvalue_unit|default=''}</div>
</div>
<script type="text/javascript">
    $(function () {
        $('#{$vo.fieldArr}_{$vo.name|default=''}').layDate();
    });
</script>
<!-- 日期和时间 end -->
{/case}
{case value="htmltext"}
<!-- HTML文本 start 手机端不显示html文本字段内容-->

<!-- HTML文本 end -->
{/case}
{/switch}
{/if}
{/volist}

<script>
    //自定义switch样式
    $(".cb-enable").click(function(){
        var parent = $(this).parents('.onoff');
        $('.cb-disable',parent).removeClass('selected');
        $(this).addClass('selected');
        $('.checkbox',parent).attr('checked', true);
    });
    $(".cb-disable").click(function(){
        var parent = $(this).parents('.onoff');
        $('.cb-enable',parent).removeClass('selected');
        $(this).addClass('selected');
        $('.checkbox',parent).attr('checked', false);
    });
    //判断复选框是否为空
    function checkbox_is_empty(fieldArr,name){
        var len = $("input[name='"+fieldArr+"["+name+"][]']:checked").length;
        $("input[name='"+fieldArr+"["+name+"_eyempty]']").val(len);
    }
</script>